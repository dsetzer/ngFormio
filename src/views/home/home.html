<div class="jumbotron welcome-banner" ng-if="showHeader && showWelcome()">
  <i ng-click="closeWelcome()" style="float:right;font-size:2em;font-weight: 100;cursor:pointer;margin-right:20px" class="fa fa-close"></i>
  <div class="container">
    <h1>Welcome to <img style="height:1em;" src="images/formio-logo-white.png"></h1>
    <div class="row" style="margin-top: 20px;">
      <div class="col col-sm-8">
        <iframe src="https://player.vimeo.com/video/133415659?title=0&byline=0&portrait=0" style="width:100%" height="360" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
      </div>
      <div class="col col-sm-4">
        <a class="btn btn-default btn-block btn-lg" href="https://help.form.io/start/" target="_blank"  role="button"><i class="fa fa-play-circle-o"></i> 5 min. tutorial</a>
        <a class="btn btn-default btn-block btn-lg" href="https://help.form.io/tutorials/walkthroughs/#servicetracker" target="_blank"  role="button"><i class="fa fa-book"></i> Complete Walkthrough</a>
        <a class="btn btn-default btn-block btn-lg" href="https://help.form.io/userguide/" target="_blank" role="button"><i class="fa fa-search"></i> User Guide</a>
        <a class="btn btn-default btn-block btn-lg" href="https://help.form.io/developer/info/" target="_blank" role="button"><i class="fa fa-file-code-o"></i> Developer Info</a>
        <a class="btn btn-default btn-block btn-lg" href="https://help.form.io/tutorials/videos/" target="_blank" role="button"><i class="fa fa-video-camera"></i> Tutorial Videos</a>
      </div>
    </div>
  </div>
</div>
<div class="welcome-info-strip" ng-if="showWelcome()">
  <div class="container">
    <div class="row">
      <div class="col-sm-10 col-sm-offset-1 text-center">
        <p>You can either create a New Project or start with a fully functional application template.</p>
      </div>
    </div>
  </div>
</div>
<div class="new-project-row" ng-if="showHeader" ng-class="{'new-project-row-min': !showWelcome()}" >
  <div class="container">
    <div class="new-project-section">
      <ul class="list-inline">
        <li class="project-template-item">
          <div class="project-template-card" id="create-custom-project" ui-sref="createProject()">
            <img class="project-template-img" src="images/empty-project.png" />
            <div class="project-template-info">
              <h5 class="ellipsis">Custom Project</h5>
            </div>
          </div>
        </li>
      </ul>
    </div>
    <div class="new-project-section">
      <h5 style="margin-top: 45px;">&mdash; OR &mdash;</h5>
    </div>
    <div class="new-project-section">
      <h5 class="new-project-header">Application Templates</h5>
      <ul class="list-inline">
        <li ng-repeat="template in templates" class="project-template-item">
          <div class="project-template-card" ng-click="createProject(template)">
            <img ng-if="template.thumbnail" class="project-template-img" ng-src="{{ template.thumbnail }}" />
            <div class="project-template-info">
              <h5 class="ellipsis">{{ template.title }}</h5>
            </div>
          </div>
        </li>
      </ul>
    </div>
  </div>
</div>
<div class="container projects">
  <div class="row">
    <div class="col-md-9 existing-projects-section">
      <h2><span ng-if="projectsLoaded && projects.length" ng-cloak>Existing Projects</span></h2>
      <div class="project well" ng-if="projectsLoaded && !projects.length" ng-cloak>
        <h4 class="project-title">Step 1: Create your project</h4>
        <ng-include src="'views/project/help.html'"></ng-include>
        <a ui-sref="createProject()" class="btn btn-md btn-primary"><span class="glyphicon glyphicon-plus circle"></span> Create Project</a>
      </div>
      <div class="row" ng-if="projectsLoaded && projects.length" ng-cloak>
        <div class="col-sm-4" ng-repeat="project in projects">
          <div class="project well" ng-click="goToProject(project)" title="{{ project.title }}">
            <span class="label project-plan-label" ng-class="getPlanLabel(project.plan)">{{ getPlanName(project.plan) | uppercase }}</span>
            <h4 class="project-title ellipsis"><a ui-sref="project.overview({projectId: project._id})">{{ project.title }}</a></h4>
            <p class="project-url ellipsis" ui-sref="project.overview({projectId: project._id})"><strong>{{ project.name }}</strong>.form.io</p>
            <p class="project-description">{{ project.description | characters: 50 }}</p>
            <div class="project-section-separator"></div>
            <p class="progress-label text-center"><small>Monthly API Calls</small></p>
            <div class="progress">
              <div class="progress-bar" role="progressbar" ng-style="{width: project.apiCalls.used / project.apiCalls.limit * 100 + '%'}" ng-class="getProgressBarClass(project.apiCalls)"></div>
              <span><small>{{ project.apiCalls.used | number }} / {{ getAPICallsLimit(project.apiCalls) }}</small></span>
            </div>
            <div class="row" style="z-index:1000;">
              <div class="col-sm-6 project-tile-button"><button ui-sref="project.overview({projectId: project._id})" class="btn btn-default btn-xs btn-block">Manage</button></div>
              <div class="col-sm-6 project-tile-button" ng-if="!onPrem"><button ng-disabled="!isProjectOwner(project)" ng-click="showUpgradeDialog(project); $event.stopPropagation();" class="btn btn-default btn-xs btn-block" title="{{!isProjectOwner(project) ? 'You must be a project owner to upgrade its plan' : ''}}">Upgrade Plan</button></div>
            </div>
            <div class="row project-teams">
              <h5 class="text-center project-teams-header">Teams <i class="fa fa-users"></i></h5><hr />
              <span ng-show="!teamSupport(project)" class="project-team-upgrade">Plan does not support teams</span>
              <div ng-show="teamSupport(project)">
                <span ui-sref="team.view({teamId: team._id})" ng-repeat="team in project.teams track by $index" ng-if="team.data.name" class="label label-default ellipsis project-team-label">{{team.data.name}}</span>
                <a ng-show="teamSupport(project)" ui-sref="project.settings.teams.add({projectId: project._id})"><span class="label label-default ellipsis project-add-team"><i class="fa fa-user-plus"></i> Add Team</span></a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <h2>Teams</h2>
      <div class="well" ng-show="!teamsLoading && !(teamsEnabled || teamMember)">
        <span class="team-upgrade">Want to work collaboratively? Upgrade a project to TeamPro to enable Team functionality.</span>
      </div>
      <div class="list-group" ng-show="!teamsLoading && (teamsEnabled || teamMember)">
        <a ui-sref="team.view({teamId: team._id})" class="list-group-item" ng-repeat="team in teams">
          <span class="badge"><i class="fa fa-users"></i>&nbsp;{{ team.data.members.length || 0 }}</span>
          <h4 class="list-group-item-heading">{{ team.data.name }}</h4>
          <span class="label label-success">{{ team.owner === user._id ? 'OWNER' : 'MEMBER'}}</span>
        </a>
      </div>
      <div class="list-group" ng-show="teamsEnabled">
        <a ui-sref="createTeam()" class="btn btn-primary btn-block"><span class="glyphicon glyphicon-plus circle"></span> Create Team</a>
      </div>
    </div>
  </div>
</div>

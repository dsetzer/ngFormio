<ul class="nav nav-tabs" role="tablist" ng-if="minPlan('team')" style="margin-bottom:10px;">
  <li role="presentation" ng-class="{'active': (currentTab === 'pdf')}"><a ng-click="setTab('pdf')"aria-controls="home" role="tab">PDF</a></li>
  <li role="presentation" ng-class="{'active': (currentTab === 'enterprise')}"><a ng-click="setTab('enterprise')" aria-controls="profile" role="tab">Enterprise</a></li>
</ul>
<span class="fa fa-spinner fa-pulse" ng-if="loading" style="font-size: 2em;"></span>
<div class="row" ng-if="minPlan('team') && currentTab === 'enterprise'">
  <div class="col col-sm-12">
    <p>Our Enterprise PDF solution allows you to deploy our PDF server within your own environment. To setup your server, please click on the following button to go to our online PDF Server deployment instructions.</p>
    <p><a class="btn btn-primary" href="https://help.form.io/userguide/pdfserver/" target="_blank">PDF Server Deployment Instructions</a></p>
    <hr/>
    <div class="panel panel-primary">
      <div class="panel-heading">
        <h3 class="panel-title">Deployment Code</h3>
      </div>
      <div class="panel-body">
        <p>Once your deployment is setup, you can run the following Docker command to spin up your new server</p>
        <pre>
docker run -itd \
  -e "FORMIO_PROJECT=<strong>{{ pdfInfo.data.project }}</strong>" \
  -e "FORMIO_PROJECT_TOKEN=<strong>{{ pdfInfo.data.token }}</strong>" \
  -e "FORMIO_PDF_PROJECT=<strong>{{ projectUrl }}</strong>" \
  -e "FORMIO_PDF_APIKEY=<strong>{{ currentProject.settings.keys[0].key }}</strong>" \
  -e "FORMIO_S3_BUCKET=[YOUR S3 BUCKET NAME]" \
  -e "FORMIO_S3_REGION=[YOUR S3 REGION]" \
  -e "FORMIO_S3_KEY=[YOUR S3 AUTH KEY]" \
  -e "FORMIO_S3_SECRET=[YOUR S3 AUTH SECRET]" \
  --restart unless-stopped \
  --name formio-files-core \
  -p 80:4005 \
  formio/formio-files-core;
        </pre>
      </div>
    </div>
    <hr />
    <div class="panel panel-default">
      <div class="panel-heading">Deployment Settings</div>
      <div class="panel-body">
        <div class="form-group">
          <label for="pdfserver">PDF Server URL</label>
          <input type="text" class="form-control" id="pdfserver" ng-model="currentProject.settings.pdfserver" placeholder="https://files.form.io" />
        </div>
        <button class="btn btn-primary" ng-click="saveProject()">Save Settings</button>
      </div>
    </div>
    <div class="panel panel-default" ng-if="currentProject.settings.pdfserver">
      <div class="panel-heading">Project PDF Token</div>
      <div class="panel-body">
        <div class="form-group">
          <p>If your Remote server has trouble with Unauthorized requests, then it may be because the following PDF Token does not match the one above. If this is the case, then please send an email to <strong>support@form.io</strong> and we will resolve the issue.</p>
          <label for="pdfserver">Project PDF Token</label>
          <input readonly type="text" class="form-control" id="filetoken" ng-model="currentProject.settings.filetoken" />
        </div>
      </div>
    </div>
  </div>
</div>
<div ng-if="currentTab === 'pdf'">
  <div class="row">
    <div class="col col-sm-6">
      <div class="panel panel-info">
        <div class="panel-heading">
          <h3 class="panel-title">PDF Forms</h3>
        </div>
        <div class="well" style="margin-bottom:0">
          <p><strong>PDF Forms</strong> are hosted PDFs that have been converted to API driven fillable PDF forms.</p>
        </div>
        <table class="table table-bordered">
          <tr>
            <th><h4>Available</h4></th>
            <td><h4>{{ availableForms }}</h4></td>
          </tr>
          <tr>
            <th><h4>Total</h4></th>
            <td><h4>{{ pdfInfo.data.forms }}</h4></td>
          </tr>
        </table>
        <div class="panel-footer">
          <a class="btn btn-primary btn-block" ui-sref="project.billing()">
            <span>Change Plan</span>
          </a>
        </div>
      </div>
    </div>
    <div class="col col-sm-6">
      <div class="panel panel-info">
        <div class="panel-heading">
          <h3 class="panel-title">Submission PDFs</h3>
        </div>
        <div class="well" style="margin-bottom:0">
          <p><strong>Submission PDFs</strong> are anytime you wish to download a submission as a filled out PDF.</p>
        </div>
        <table class="table table-bordered">
          <tr>
            <th><h4>Available</h4></th>
            <td><h4>{{ availableSubs }}</h4></td>
          </tr>
          <tr>
            <th><h4>Total</h4></th>
            <td><h4>{{ pdfInfo.data.submissions }}</h4></td>
          </tr>
        </table>
        <div class="panel-footer">
          <a class="btn btn-primary btn-block" ui-sref="project.billing()">
            <span>Change Plan</span>
          </a>
        </div>
      </div>
    </div>
  </div>
  <table class="table table-striped table-bordered">
    <thead>
    <tr>
      <th>#</th>
      <th>PDF</th>
      <th>Forms</th>
      <th>Operations</th>
    </tr>
    </thead>
    <thead>
    <tr ng-repeat="pdf in availablePDFs">
      <td>{{ $index + 1 }}</td>
      <td><a href="{{ getPDFUrl(pdf) }}" target="_blank">{{ pdf.data.id }}</a></td>
      <td><ul>
        <li ng-repeat="form in forms[pdf.data.id]"><a ui-sref="project.{{ form.type }}.form.view({formId: form._id})">{{ form.title }}</a></li>
      </ul></td>
      <td>
        <ul class="list-inline">
          <li><button class="btn btn-default" ng-if="canDelete(pdf)" ng-click="deletePDF(pdf)"><span class="glyphicon glyphicon-trash"></span></button></li>
        </ul>
      </td>
    </tr>
    </thead>
  </table>
</div>

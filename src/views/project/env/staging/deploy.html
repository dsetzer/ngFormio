<upgrade-warning ng-if="!minPlan('commercial')" warning="Upgrade your project to Enterprise to enable deploying to stages." />
<div>
  <h3>Deploy to {{ environmentName }}</h3>
  <div class="row">
    <div class="col-md-8">
      <div ng-if="tags.length">
        <h4>Select Version</h4>
        <p><select class="form-control tags" ng-model="deployTagOption" ng-options="selectTag as selectTag.tag for selectTag in tags"></select></p>
        <span class="btn btn-primary" ng-click="deployTag(deployTagOption)" ng-disabled="isBusy"><i ng-if="isBusy" class="fa fa-spinner fa-pulse"></i> Deploy version to {{ environmentName }}</span>
      </div>
      <div ng-if="tag">
        <h4>Version</h4>
        <p><strong ng-if="tag">{{ tag.tag }}</strong></p>
        <span class="btn btn-primary" ng-click="deployTag(deployTagOption)" ng-disabled="isBusy"><i ng-if="isBusy" class="fa fa-spinner fa-pulse"></i> Deploy version to {{ environmentName }}</span>
        <span class="btn btn-default" ui-sref="project.env.staging.manage">Cancel</span>
      </div>
      <div ng-if="!tags.length && !tag">
        <p>No versions exist. <a ui-sref="project.env.staging.create">Create</a> a new version in the source stage before deploying.</p>
      </div>
    </div>
    <div class="col-md-4">
      <div class="panel panel-primary">
        <div class="panel-heading">
          <h3 class="panel-title">Deploying a version</h3>
        </div>
        <div class="panel-body">
          <p>Deploying a version to a stage will replace all forms, resources, roles, actions and access settings with the ones in the version.</p>
          <p>This is used for migrating a project from one stage to another. First create a new version from the source stage and then deploy it into the target stage. This allows for performing a <br />Dev -> Stage -> Prod deployment strategy.</p>
          <p>To deploy a version, select the version you would like to deploy and click the <strong>Deploy</strong> button.</p>
        </div>
      </div>
    </div>
  </div>
</div>

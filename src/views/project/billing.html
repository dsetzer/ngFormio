<div class="project-section-inner-content">
  <div class="row">
    <div class="col-sm-4">
      <ng-include src="'views/project/settings/menu.html'" />
      <div ng-if="(['basic', 'trial'].indexOf(selectedPlan.name) === -1) || (pdfInfo.plan === 'hosted')">
        <div ng-if="!paymentInfoLoading && !paymentInfo" class="cc-form">
          <h5 class="text-muted">Enter your credit card info.<br>Your first month will be billed on a prorated basis.</h5>
          <formio src="paymentForm" form-action="'/payeezy'"></formio>
        </div>
        <div ng-if="!paymentInfoLoading && paymentInfo">
          <h5>Payments will be charged to:</h5>
          <h5 class="payment-info"><strong>{{capitalize(paymentInfo.cardType)}} ending in {{paymentInfo.ccNumber.substr(-4)}}</strong></h5>
          <h5 class="text-muted payment-info">Expires on {{paymentInfo.ccExpiryMonth}}/{{paymentInfo.ccExpiryYear}}</h5>
          <h5 class="text-muted payment-info">Name on Card: {{paymentInfo.cardholderName}}</h5>
          <p><small><a class="btn btn-sm btn-default" ng-click="changePaymentInfo()">Change my credit card</a></small></p>
          <br>
        </div>
      </div>
      <ul class="list-group">
        <li class="list-group-item list-group-heading">
          <div class="row">
            <div class="col-xs-12">
              <h4 style="font-weight:bold">Billing</h4>
            </div>
          </div>
        </li>
        <li class="list-group-item">
          <div class="row">
            <div class="col-xs-7">
              <h4>{{ selectedPlan.title }} Plan</h4>
            </div>
            <div class="col-xs-5">
              <h4>${{ pricing.plan }}/month</h4>
            </div>
          </div>
        </li>
        <li class="list-group-item" ng-if="pricing.pdfPrice > 0">
          <div class="row">
            <div class="col-xs-7">
              <h4>Hosted PDF</h4>
            </div>
            <div class="col-xs-5">
              <h4>${{ pricing.pdfPrice }}/month</h4>
            </div>
          </div>
        </li>
        <li class="list-group-item" ng-if="pricing.formManager > 0">
          <div class="row">
            <div class="col-xs-7">
              <h4>Form Manager</h4>
            </div>
            <div class="col-xs-5">
              <h4>${{ pricing.formManager }}/month</h4>
            </div>
          </div>
        </li>
        <li class="list-group-item">
          <div class="row">
            <div class="col-xs-7">
              <h4 style="font-weight:bold">Total</h4>
            </div>
            <div class="col-xs-5">
              <h4 style="font-weight:bold">${{ pricing.total }}/month</h4>
            </div>
          </div>
        </li>
      </ul>
      <button
        class="btn btn-success pull-right"
        ng-if="primaryProject.plan !== selectedPlan.name
         || pdfInfo.plan !== pdfInfoOriginalPlan"
        ng-disabled="selectedPlan.price !== 0 && !paymentInfo"
        ng-click="changePlan()">
        <i ng-if="planLoading" class="fa fa-spinner fa-pulse"></i> Confirm Billing Change
    </button>
    </div>
    <div class="col-sm-8" style="padding: 0 20px 40px 0;">
      <div class="panel panel-success">
        <div class="panel-heading">
          <h3 class="panel-title">Project Plan</h3>
        </div>
        <ul class="list-group project-plans">
          <li class="list-group-item list-group-heading">
            <div class="row">
              <div class="col-sm-2">
                <h4 style="font-weight:bold">Plan</h4>
              </div>
              <div class="col-sm-4">
                <h4 style="font-weight:bold">Details</h4>
              </div>
              <div class="col-sm-3">
                <h4 style="font-weight:bold">Price</h4>
              </div>
              <div class="col-sm-3">

              </div>
            </div>
          </li>
          <li class="list-group-item" ng-repeat="plan in plans | orderBy:displayOrder:true" ng-if="(plan.name !== 'trial' || trialDaysRemaining)">
            <div class="row">
              <div class="col-sm-2">
                <h4>{{ plan.title }}</h4>
              </div>
              <div class="col-sm-4">
                <table class="table table-condensed table-bordered">
                  <tr>
                    <th>Forms</th>
                    <td>{{plan.features.forms}}</td>
                  </tr>
                  <tr>
                    <th>Form Requests</th>
                    <td>{{plan.features.formRequests}} / month</td>
                  </tr>
                  <tr>
                    <th>Submission Requests</th>
                    <td>{{plan.features.submissionRequests}} / month</td>
                  </tr>
                  <tr>
                    <th>Emails</th>
                    <td>{{plan.features.emails}} / month</td>
                  </tr>
                </table>
              </div>
              <div class="col-sm-3">
                <h4>{{ plan.priceDescription }}</h4>
              </div>
              <div class="col-sm-3">
                <span class="btn btn-default" ng-if="selectedPlan.order !== plan.order" ng-click="setSelectedPlan(plan)">Select</span>
                <span ng-if="selectedPlan.order === plan.order" class="btn btn-success">Selected</span>
              </div>
            </div>
          </li>
        </ul>
      </div>
      <div class="panel panel-success">
        <div class="panel-heading">
          <h3 class="panel-title">Add-ons</h3>
        </div>
        <ul class="list-group project-onpremise">
          <li class="list-group-item list-group-heading">
            <div class="row">
              <div class="col-sm-2">
                <h4 style="font-weight:bold">Plan</h4>
              </div>
              <div class="col-sm-4">
                <h4 style="font-weight:bold">Details</h4>
              </div>
              <div class="col-sm-3">
                <h4 style="font-weight:bold">Price</h4>
              </div>
              <div class="col-sm-3"></div>
            </div>
          </li>
          <li class="list-group-item">
            <div class="row">
              <div class="col-sm-2">
                <h4>PDFs</h4>
              </div>
              <div class="col-sm-4">
                <table class="table table-condensed table-bordered">
                  <tr>
                    <th>Forms</th>
                    <td>{{pdfs}}</td>
                  </tr>
                  <tr>
                    <th>Downloads</th>
                    <td>{{pdfDownloads}} / month</td>
                  </tr>
                </table>
              </div>
              <div class="col-sm-3">
                <h4 ng-if="pdfPrice > 0">${{pdfPrice}} / month</h4>
                <h4 ng-if="!(pdfPrice > 0)">Included</h4>
              </div>
              <div class="col-sm-3">
                <span class="btn btn-default" ng-style="{visibility: (selectedPlan.features.pdfUpgradeable && pdfs < 101) ? 'visible' : 'hidden'}" ng-click="increasePdfs()">Increase</span>
                <span class="btn btn-default" ng-style="{visibility: (selectedPlan.features.pdfUpgradeable && pdfs > selectedPlan.features.pdfs) ? 'visibible' : 'hidden'}" ng-click="decreasePdfs()">Decrease</span>
                <p ng-if="!selectedPlan.features.pdfUpgradeable">Only available for Team Pro and above</p>
              </div>
            </div>
          </li>
          <li class="list-group-item">
            <div class="row">
              <div class="col-sm-2">
                <h4>Form Manager</h4>
              </div>
              <div class="col-sm-4">
                Form Manager provides a customizable Form-builder Interface for non-developer users and groups that can be shared with form builders within a project context.
              </div>
              <div class="col-sm-3">
                <h4>$150 / month</h4>
              </div>
              <div class="col-sm-3">
                <span class="btn btn-default" ng-click="toggleFormManager()">{{hasFormManager ? 'Remove' : 'Add'}}</span>
                <p ng-if="!selectedPlan.features.pdfUpgradeable">Only available for Team Pro and above</p>
              </div>
            </div>
          </li>
        </ul>
      </div>
      <div class="panel panel-info">
        <div class="panel-heading">
          <h3 class="panel-title">On Premise Servers and PDFs</h3>
        </div>
        <ul class="list-group project-onpremise">
          <li class="list-group-item">
            <div class="row">
              <div class="col-sm-12">
                For an On Premise license for our servers, contact <a href="mailto:sales@form.io">sales@form.io</a>
              </div>
            </div>
          </li>
        </ul>
      </div>    </div>
  </div>
</div>

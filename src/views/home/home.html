<div class="jumbotron welcome-banner" ng-if="showHeader && showWelcome()">
  <i ng-click="closeWelcome()" style="float:right;font-size:2em;font-weight: 100;cursor:pointer;margin-right:20px" class="fa fa-close"></i>
  <div class="container">
    <h1>Welcome to <img style="height:1em;" src="images/formio-logo-white.png"></h1>
    <div class="row" style="margin-top: 20px;">
      <div class="col col-sm-8">
        <iframe src="https://player.vimeo.com/video/133415659?title=0&byline=0&portrait=0" style="width:100%" height="360" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
      </div>
      <div class="col col-sm-4">
        <a class="btn btn-default btn-block btn-lg" href="https://help.form.io/intro/welcome/" target="_blank"  role="button"><i class="fa fa-rocket"></i> Getting Started</a>
        <a class="btn btn-default btn-block btn-lg" href="https://help.form.io/intro/howworks/" target="_blank" role="button"><i class="fa fa-question-circle"></i> How it works</a>
        <a class="btn btn-default btn-block btn-lg" href="https://help.form.io/intro/guide/" target="_blank"  role="button"><i class="fa fa-book"></i> 30 minute guide</a>
        <a class="btn btn-default btn-block btn-lg" href="https://help.form.io/developer/welcome/" target="_blank" role="button"><i class="fa fa-file-code-o"></i> Developer Info</a>
        <a class="btn btn-default btn-block btn-lg" href="https://help.form.io/tutorials/videos/welcome/" target="_blank" role="button"><i class="fa fa-youtube-play"></i> Tutorials</a>
      </div>
    </div>
  </div>
</div>
<div class="welcome-info-strip" ng-if="showWelcome()">
  <div class="container">
    <div class="row">
    </div>
  </div>
</div>
<div class="new-project-row" ng-if="showHeader" ng-class="{'new-project-row-min': !showWelcome()}" >
  <div class="container">
    <div class="new-project-section">
      <h2 class="new-project-header text-center"><strong>Free 30 Day Enterprise Plan Trial</strong></h2>
      <div class="text-center">
        <h3>To get started select the framework for your application</h3>
      </div>
      <ul class="list-inline">
        <li ng-repeat="framework in frameworks" class="project-template-item grow">
          <div class="project-template-card new-project-{{framework.name}}" ng-click="newProject(framework);" ng-if="!framework.hide">
            <div class="framework-coming-soon" ng-if="framework.disabled">Coming Soon</div>
            <img ng-if="framework.img" class="project-template-img" ng-src="{{ framework.img }}" />
            <div class="project-template-info">
              <h5 class="ellipsis">{{ framework.title }}</h5>
            </div>
          </div>
        </li>
      </ul>
    </div>
  </div>
</div>
<div class="container projects">
  <div class="row">
    <div class="col-md-9 existing-projects-section">
      <div class="existing-title">
        <h2><span ng-if="projectsLoaded" ng-cloak>Existing Projects</span></h2>
        <div class="form-inline" style="margin: 21px 0 10px;">
          <div class="form-group">
            <div class="input-group">
              <div class="input-group-addon">Search</div>
              <input id="project-search" type="text" class="form-control" ng-model="projectSearch.title" placeholder="Find a project...">
            </div>
          </div>
        </div>
      </div>
      <i ng-if="!projectsLoaded" style="font-size: 2em;" class="fa fa-spinner fa-pulse"></i>
      <div class="row" ng-if="projectsLoaded" ng-cloak>
        <div class="col-sm-4" ng-repeat="project in projects | filter:projectSearch">
          <div class="project well" ng-click="goToProject(project)" title="{{ project.title }}">
            <span class="label project-plan-label" ng-class="getPlanLabel(project.plan)">{{ getPlanName(project.plan) | uppercase }}</span>
            <h4 class="project-title ellipsis"><a ui-sref="project.overview({projectId: project._id})">{{ project.title }}</a></h4>
            <p class="project-framework"><strong>{{ getFrameworkTitle(project.framework) }}</strong></p>
            <p class="project-description">{{ project.description | characters: 50 }}</p>
            <div class="project-section-separator"></div>
            <div ng-if="!project.remote && !onPremise">
              <div class="progress">
                <div class="progress-bar" role="progressbar" ng-style="{width: getAPICallsPercent(project.apiCalls, 'forms')}" ng-class="getProgressBarClass(project.apiCalls, 'forms')"></div>
                <span><small>{{ project.apiCalls.used.forms || 0 | number }} / {{ getAPICallsLimit(project.apiCalls.limit.forms) }} Forms</small></span>
              </div>
              <div class="progress">
                <div class="progress-bar" role="progressbar" ng-style="{width: getAPICallsPercent(project.apiCalls, 'formRequests')}" ng-class="getProgressBarClass(project.apiCalls, 'formRequests')"></div>
                <span><small>{{ project.apiCalls.used.formRequests || 0 | number }} / {{ getAPICallsLimit(project.apiCalls.limit.formRequests) }} FR</small></span>
              </div>
              <div class="progress">
                <div class="progress-bar" role="progressbar" ng-style="{width: getAPICallsPercent(project.apiCalls, 'submissionRequests')}" ng-class="getProgressBarClass(project.apiCalls, 'submissionRequests')"></div>
                <span><small>{{ project.apiCalls.used.submissionRequests || 0 | number }} / {{ getAPICallsLimit(project.apiCalls.limit.submissionRequests) }} SR</small></span>
              </div>
              <div class="progress">
                <div class="progress-bar" role="progressbar" ng-style="{width: getAPICallsPercent(project.apiCalls, 'emails')}" ng-class="getProgressBarClass(project.apiCalls, 'emails')"></div>
                <span><small>{{ project.apiCalls.used.emails || 0 | number }} / {{ getAPICallsLimit(project.apiCalls.limit.emails) }} Emails</small></span>
              </div>
            </div>
            <div ng-if="project.remote || onPremise">
              <h4>Enterprise Edition <br /> (On Premise)</h4>
            </div>
            <div class="project-section-separator"></div>
            <div class="row" style="z-index:1000;" ng-if="!onPremise">
              <div class="col-sm-6 project-tile-button"><button ui-sref="project.overview({projectId: project._id})" class="btn btn-default btn-xs btn-block">Manage</button></div>
              <div class="col-sm-6 project-tile-button"><span ng-disabled="!isProjectOwner(project)" ui-sref="project.billing({projectId: project._id})" class="btn btn-default btn-xs btn-block" title="{{!isProjectOwner(project) ? 'You must be a project owner to upgrade its plan' : ''}}">Upgrade Plan</span></div>
            </div>
            <div class="row project-teams">
              <h5 class="text-center project-teams-header">Teams <i class="fa fa-users"></i></h5><hr />
              <span ng-show="!teamSupport(project)" class="project-team-upgrade">Plan does not support teams</span>
              <div ng-show="teamSupport(project)">
                <span ui-sref="team.view({teamId: team._id})" ng-repeat="team in project.teams track by $index" ng-if="team.data.name" class="label label-default ellipsis project-team-label">{{team.data.name}}</span>
                <a ng-show="teamSupport(project) && teamAdmin(project)" ui-sref="project.teams({projectId: project._id})"><span class="label label-default ellipsis project-add-team"><i class="fa fa-user-plus"></i> Manage Teams</span></a>
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-4 project-example">
          <div class="project well" title="My Awesome Project" ng-click="newProject();">
            <div class="text-center"><h4>New Project</h4></div>
            <div class="text-center"><i class="fa fa-plus"></i></div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <h2>Teams <small><a href="https://help.form.io/userguide/teams/" target="_blank"><i class="fa fa-info-circle"></i></a></small></h2>
      <div class="form-inline" style="margin-bottom: 20px;" ng-show="teams.length">
        <div class="form-group">
          <div class="input-group">
            <div class="input-group-addon">Search</div>
            <input id="team-search" type="text" class="form-control" ng-model="teamSearch.data.name" placeholder="Find a team...">
          </div>
        </div>
      </div>
      <div class="list-group" ng-show="!teamsLoading">
        <div class="well" ng-show="!teams.length">
          <span class="team-upgrade">Want to work collaboratively? Create a team to allow others to help work on your project.</span>
        </div>
        <a ui-sref="team.view({teamId: team._id})" class="list-group-item" ng-repeat="team in teams | filter:teamSearch">
          <span class="badge"><i class="fa fa-users"></i>&nbsp;{{(team.data.members.length + team.data.admins.length) || 0 }}</span>
          <h4 class="list-group-item-heading">{{ team.data.name }}</h4>
          <span class="label label-success">{{ team.owner === user._id ? 'OWNER' : 'MEMBER'}}</span>
        </a>
      </div>
      <div class="list-group">
        <a ui-sref="createTeam()" class="btn btn-primary btn-block"><span class="glyphicon glyphicon-plus circle"></span> Create Team</a>
      </div>
    </div>
  </div>
</div>

<div>
  <h3>Export {{ projectType }} {{ environmentName }}</h3>
  <div class="row">
    <div class="col-md-8">
      <p>The following button will export your project as a JSON file that can then be used as a template for other projects.</p>
      <label for="title">Title</label>
      <input id="title" class="form-control" placeholder="Project Title" ng-model="export.title" />
      <br />
      <label for="name">Name</label>
      <input id="name" class="form-control" placeholder="abc123" ng-model="export.name" />
      <br />
      <div class="panel panel-info">
        <div class="panel-heading">
          <h3 class="panel-title">Included Template Components</h3>
        </div>
        <div class="panel-body">
          <label for="includeAll">
            <input type="checkbox" id="includeAll" ng-model="includeAll"> Include all
          </label>

          <div ng-if="!includeAll">
            <div ng-repeat="section in sections track by $index" class="panel panel-default">
              <div class="panel-heading">
                <h3 class="panel-title">{{section.label}} - <a ng-click="toggleAll(section)" style="font-size: 12px">select/deselect all</a></h3>
              </div>
              <div class="panel-body">
                <span class="label label-default" style="display: inline-block; margin: 3px; border-radius: 3px;" ng-repeat="(key, item) in template[section.key] track by key">
                  <label for="{{section.key}}-{{key}}" style="margin-bottom: 0">
                    <input
                      type="checkbox"
                      id="{{section.key}}-{{key}}"
                      name="{{section.key}}-{{key}}"
                      value="{{item}}"
                      ng-checked="export[section.key].hasOwnProperty(key)"
                      ng-click="toggleItem(section, key, item)"
                      ng-disabled="section.key === 'actions'"
                    >
                    {{item.title}} ({{key}})
                  </label>
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <label for="excludeAccess">
        <input type="checkbox" id="excludeAccess" ng-model="excludeAccess"> Exclude Access Settings
      </label>
      <br /><br />
      <span class="btn btn-success" ng-click="downloadTemplate()"><i ng-if="isBusy" class="fa fa-spinner fa-pulse"></i> Export Template</span>
      <span class="btn btn-default" ui-sref="project.env.staging.manage">Cancel</span>
    </div>
    <div class="col-md-4">
      <div class="panel panel-primary">
        <div class="panel-heading">
          <h3 class="panel-title">Exporting a project template</h3>
        </div>
        <div class="panel-body">
          <p>Exporting a project template will bundle all the forms, resources, roles, actions and access into a JSON file and download it to your computer. This file can be used to import into another stage or create a new project with the same definition as this one.</p>
        </div>
      </div>
    </div>
  </div>
</div>
